<!DOCTYPE html>
<html>
<head>
    <title>mcnultydalbamead_3210_project3</title>
</head>
<body>

    <canvas id="myCanvas"></canvas>

    <script type="module">
import * as THREE from 'three';
import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

var scene = new THREE.Scene();

var camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, .1, 3000 );
camera.position.set(0, 9, 6);
camera.lookAt( new THREE.Vector3(0.0,6.0,2.0));
scene.add( camera );

var renderer = new THREE.WebGLRenderer({canvas: myCanvas, antialias: true});
renderer.setClearColor(0x000000);
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setSize(window.innerWidth, window.innerHeight);

 // Light Setup
 const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
 scene.add(ambientLight);
 
 const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
 directionalLight.position.y = 10;
 directionalLight.castShadow = true;
 directionalLight.shadow.mapSize.width = 1024;
 directionalLight.shadow.mapSize.length = 1024;


 scene.add(directionalLight);

 const gltfLoader = new GLTFLoader();
 gltfLoader.load('./components/kitchen_table.glb', function(glb) {
    const model = glb.scene;
    scene.add(model);
    model.rotateY(Math.PI / 2);
    model.scale.set(0.4, 0.4, 0.4);
    model.position.set(0.25, 0.15, 0);

    model.traverse(function(node) {
        if(node.isMesh)
            node.receiveShadow = true;
    })

 });

//Creating the deck
 var deck = [];
 const cardData = {
    suit: ['spades','hearts', 'clubs', 'diamonds'], 
    value: [2,3,4,5,6,7,8,9,10,11,12,13,14]}

//creating each individual card
function createDeck(){
   cardData.suit.forEach((suit) => {
        cardData.value.forEach((val) => {
            var card = {
                suit: suit,
                value: val,
                texture: createTextures(suit,value),
                obj: createCardObject(texture)
            }
            deck.push(card);
        })
   })
}

//creating the textures
function createTextures(suit,val){
    var loader = new THREE.TextureLoader();
    if(val <= 10){
        return loader.load('cardT/' + val + suit + '.png');
    } else if (val == 11){
        return loader.load('cardT/jack' + suit + '.png');
    } else if (val == 12){
        return loader.load('cardT/queen' + suit + '.png');
    } else if (val == 13){
        return loader.load('cardT/king' + suit + '.png');
    } else if (val == 14){
        return loader.load('cardT/ace' + suit + '.png');
    }
}

//creating the card object
function createCardObject(texture){
    var geometry = new THREE.BoxGeometry(.4,.6,.001);
    var materials = [
        new THREE.BasicMeshMaterial(),
        new THREE.BasicMeshMaterial(),
        new THREE.BasicMeshMaterial(),
        new THREE.BasicMeshMaterial(),
        new THREE.BasicMeshMaterial({map: 'cardT/'+texture}),
        new THREE.BasicMeshMaterial({map: 'cardT/back.png'})
    ];
    var mesh = new THREE.Mesh(geometry, materials);
    return mesh;
}

  // Render loop
  function animate() {
    requestAnimationFrame(animate);
    renderer.render(scene, camera);
    }
    animate();    
</script>
</body>
</html>
